# Рабочий стол рефакторинга приложения

**Текущий рабочий стол рефакторинга.** Здесь ведём процесс и прогресс по одному пользовательскому процессу за раз.

---

## Правила рефакторинга

| Что делаем | Как делаем | Зачем |
|------------|------------|--------|
| Отталкиваемся от процесса пользователя | Выбираем один сценарий (например: «Пользователь аутентифицируется через Telegram») | Чтобы рефакторить по бизнес-логике, а не по файлам |
| Сначала описываем сценарий | Текстом: шаги пользователя, входы/выходы, исключения | Общая картина и границы процесса |
| Потом — реализацию в коде | Цепочка функций, вызовы, контекст данных (без полного кода) | Понимаем область в коде, ответственную за процесс |
| Формулируем задачи рефакторинга | Что сделать, какие проблемы устранить по этому процессу | Чёткий список работ |
| Отслеживаем задачи | Статусы в этом файле (или чек-лист) | Видим прогресс |
| Реализуем рефакторинг | Вносим изменения в коде по задачам | Улучшаем реализацию процесса |
| Выносим описание в отдельный файл | После выполнения или по требованию → файл вида `US-XXXXX-краткое-имя.md` | Артефакт документации: бизнес-процесс и юзка с привязкой к кодовой реализации; потом по нему работаем с процессом и понимаем контекст |

**Итог по документу:** один процесс = один проход. После рефакторинга (или по запросу) описание уезжает в `US-XXXXX-*.md`, здесь остаётся только активный процесс и правила.

---

**Ссылки:** Confluence используется для описания юзок (задач). Ссылку на Confluence добавляем к **текущему процессу** (к задаче/юзке), а не к документу рефакторинга в целом.

---

## Текущий процесс (в работе)

_Выберите один пользовательский процесс и заполните блок ниже._

### 1. Пользовательский сценарий

- **Confluence (юзка):** _[ссылка на описание юзки в Confluence]_
- **Название процесса:** _—_
- **Описание:** _шаги пользователя, что он делает и что получает_
- **Исключения / краевые случаи:** _—_

### 2. Реализация в коде

- **Область в коде:** _модули, папки, ключевые файлы_
- **Цепочка вызовов:** _функция A → B → C, кратко что делает каждая_
- **Контекст данных:** _какие сущности, DTO, хранилища участвуют_

### 3. Задачи рефакторинга

- [ ] _Задача 1_
- [ ] _Задача 2_
- _…_

### 4. Прогресс и заметки

_Кратко: что сделано, что осталось, блокеры._

---

## Вынесенные процессы (архив)

После рефакторинга или по требованию описание переносится в отдельный файл:

| Документ | Процесс | Когда вынесен |
|----------|---------|----------------|
| [US-00002-user-auth-via-tg.md](../docs/US-00002-user-auth-via-tg.md) | US-00002 Авторизация и вход (Telegram Bot mini-apps) | рефакторинг завершён |
| _—_ | _—_ | _—_ |

---

## Оставшиеся вопросы рефакторинга

_Вопросы, которые не привязаны к одному процессу или требуют отдельного решения._

- _—_
